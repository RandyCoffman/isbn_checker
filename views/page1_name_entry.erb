<!DOCTYPE html>
<html>
<head>
	<title>Welcome</title>
	<script src="https://apis.google.com/js/platform.js" async defer></script>
	<meta name="google-signin-client_id" content="380424629633-6p8tmje54gmv3s1179opunm1b02isda9.apps.googleusercontent.com">
	<!-- <script src="/public/google_login.js"></script> -->
</head>
<body>
	<h1>Welcome to my ISBN checker!</h1>
	<br><br>
	<h3>Please enter your name below.</h3>

<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '2103993239838212',
      cookie     : true,
      xfbml      : true,
      version    : 'v2.8'
    });

	FB.getLoginStatus(function(response) {
	    statusChangeCallback(response);
	});
	FB.api(
'/{user-id}',
'GET',
{},
function(response) {
	console.log("The FB response is");
	console.log(response);
		// Insert your code here
}
);
  };
    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

  // Here we run a very simple test of the Graph API after login is
  // successful.  See statusChangeCallback() for when this call is made.
  function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name);
      document.getElementById('status').innerHTML =
        'Thanks for logging in, ' + response.name + '!';
		var first_name = response.name().split(' ').slice(0, -1).join(' ');
        var last_name = response.name().split(' ').slice(-1).join(' ');
        document.getElementById('first_name').value = first_name
        document.getElementById('last_name').value = last_name
      });
		}

</script>


<fb:login-button
	data-size="large"
	data-button-type="continue_with"
  scope="public_profile,email"
  onlogin="testAPI();">
	<!-- checkLoginState(); -->
</fb:login-button><br>

<div class="g-signin2" data-onsuccess="onSignIn"></div>
<script type="text/javascript">
    function onSignIn(googleUser) {
       	var profile = googleUser.getBasicProfile();
  		console.log('Name: ' + profile.getName());
  		console.log('Image URL: ' + profile.getImageUrl());
        console.log("Succesfully Singed in!!!");
        var first_name = profile.getName().split(' ').slice(0, -1).join(' ');
        var last_name = profile.getName().split(' ').slice(-1).join(' ');
        console.log(first_name);
        console.log(last_name);
        document.getElementById('first_name').value = first_name
        document.getElementById('last_name').value = last_name
        }
</script>
<div>
	<button onclick="signOut();">Sign out</button>
	<script type="text/javascript">
	function signOut() {
	document.location.href = "https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=https://scotts-isbn-validator.herokuapp.com";
	}
	</script>
</div>
	<form method="post" action="post-name"> 
		<div>
			<input type="text" name="first_name" placeholder="First Name" id="first_name" value="">
			<input type="text" name="last_name" placeholder="Last Name" id="last_name" value="">
		</div>
		<div>
			<input type="submit">
		</div>
	</form>

</body>
</html>